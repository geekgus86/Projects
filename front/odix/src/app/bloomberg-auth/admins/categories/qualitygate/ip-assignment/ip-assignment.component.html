<div class="admins-workspace__regionTitle">
    <h1 translate>Station/MiniCPU IP Assignment</h1>
  </div>
  <div class="admins-workspace__addLevel">
    <button (click)="open()" >
        <img src="assets/images/admins/add-new.svg" alt="" > &nbsp;<span translate>Create Assignment</span>
    </button>
  </div>
  
  <div class="admins-workspace__container">
    <div class="admins-workspace__container--title">
        <span translate>Filters</span>
        <div class="admins-workspace__container--title__filters">
            <input (input)="filterIps()" [(ngModel)]="filter.nameRegistered" type="text">
            <i class="fa fa-search"></i>
        </div>
    </div>
    <div class="admins-workspace__container--table">
        <table class="adminsTable">
            <tr>
                <th> IP </th>
                <th translate> Linea </th>
                <th> ENN </th>
                <th translate> Station </th>
                <th translate> Operator Position </th>
                <th>&nbsp;...</th>
            </tr>
  
            <tr *ngFor="let element of ipListFiltered | paginate: { itemsPerPage: 17, currentPage: p }; let ind = index;"  >
                <td>{{element.ipAddress}}</td>
                <td>{{element.lineName}}</td>
                <td>{{element.ennName}}</td>
                <td>{{element.stationName}}</td>    
                <td>{{element.opPosition}}</td>         
                <td class="options">
                    <img (click)="editIp(element)" class="optionsImg" src="assets/images/admins/edit.svg" alt="">
                    <img (click)="deleteIp(element)" class="optionsImg" src="assets/images/admins/garbage.svg" alt="">
                </td>
            </tr>
  
        </table>
        <pagination-controls (pageChange)="p = $event"></pagination-controls>
    </div>
  </div>
  
  <div [class.hiddenFC]="isFormHidden" class="formsContainer">
    <div class="formsContainer__title">
        <h2 *ngIf="!isEditing" translate>Create Assignment</h2>
        <h2 *ngIf="isEditing" translate>Edit Assignment</h2>
    </div>
    <div class="formsContainer__forms">
        <div class="odix-form">
            <h5>IP</h5>
            <input [formControl]="ipFormControl" [(ngModel)]="ipNumber" pattern="((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))">
            <p class="invalidIp" *ngIf="ipFormControl.errors?.pattern || ipNumber == undefined || ipNumber == ''" translate> IP Not Valid </p>
            <p class="validIp" *ngIf="(!ipFormControl.errors?.pattern) && ipNumber != undefined && ipNumber != ''" translate> IP Valid </p>
        </div> 
        <div class="odix-form">
            <h5 translate>Linea</h5>
            <select (change)="lineComboSelectionChange()" [(ngModel)]="selectedLineOnCombo">
                <option value="undefined" disabled selected hidden></option>
                <option *ngFor="let line of lineCombo" [ngValue]="line"> {{line.Text}} </option>
            </select>
            <img _ngcontent-c4="" alt="" class="downsideArrow" src="assets/images/admins/arrow.svg">
        </div>
        <div class="odix-form">
            <h5>ENN</h5>
            <select (change)="ennComboSelectionChange()" [(ngModel)]="selectedEnnOnCombo">
                <option value="undefined" disabled selected hidden></option>
                <option *ngFor="let enn of filterEnnsByLine()" [ngValue]="enn"> {{enn.Text}} </option>
            </select>
            <img _ngcontent-c4="" alt="" class="downsideArrow" src="assets/images/admins/arrow.svg">
        </div>
        <div class="odix-form">
            <h5 translate>Station</h5>
            <select [(ngModel)]="selectedStationOnCombo">
                <option value="undefined" disabled selected hidden></option>
                <option *ngFor="let station of filterStationsByEnn()" [ngValue]="station"> {{station.Text}} </option>
            </select>
            <img _ngcontent-c4="" alt="" class="downsideArrow" src="assets/images/admins/arrow.svg">
        </div>
        <div class="odix-form">
            <h5 translate>Operator Position</h5>
            <select [(ngModel)]="selectedOperatorPosition">
                <option value="undefined" disabled selected hidden></option>
                <option [ngValue]="1">1</option>
                <option [ngValue]="2">2</option>
                <option [ngValue]="3">3</option>
                <option [ngValue]="4">4</option>
            </select>
            <img _ngcontent-c4="" alt="" class="downsideArrow" src="assets/images/admins/arrow.svg">
        </div>   
    </div>
    <hr>
    <div class="formsContainer__actions">
        <button (click)="closeForm()" class="cancel" translate>Cancel</button>
        <ng-container *ngIf="!isEditing">
          <button (click)="save()" class="active" translate>Add</button>
        </ng-container>
        <ng-container *ngIf="isEditing">
          <button  (click)="edit()" class="active" translate>Accept</button>
        </ng-container>
    </div>
  </div>
  
  <section class="wrapper dark" *ngIf="isLoading">
      <div class="spinner">
          <i></i>
          <i></i>
          <i></i>
          <i></i>
          <i></i>
          <i></i>
          <i></i>
      </div>
  </section>